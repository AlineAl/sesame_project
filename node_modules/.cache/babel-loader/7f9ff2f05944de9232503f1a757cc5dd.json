{"ast":null,"code":"import _defineProperty from\"/Users/aline/Desktop/Projects/sesame_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/aline/Desktop/Projects/sesame_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/aline/Desktop/Projects/sesame_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/aline/Desktop/Projects/sesame_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/aline/Desktop/Projects/sesame_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import ReactMarkdown from'react-markdown';import{Link}from\"react-router-dom\";import axios from'axios';import imageClosing from'../images/nagy-arnold-X_IvVDuHvDQ-unsplash.jpg';import quotesClosing from'../images/‚Äù.png';import imageTemoignage from'../images/karina-vargas-J7hCnavj7QE-unsplash.jpg';import Carousel from'react-elastic-carousel';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ClosingAcademie(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),articles=_useState4[0],setArticles=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),temoignages=_useState6[0],setTemoignages=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),files=_useState8[0],setFile=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),articleAcademie=_useState10[0],setArticleAcademie=_useState10[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var formData,_axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;formData=new FormData();formData.append('files',files);_context.next=6;return axios.post('https://sesameoeuvretoiadmin.herokuapp.com/api/upload',formData,{headers:{'Content-Type':'multipart/form-data'}});case 6:_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 11:try{_axios$post=axios.post('https://sesameoeuvretoiadmin.herokuapp.com/api/articles-academies',{data:{titleAcademie:articleAcademie.titleAcademie,contentAcademie:articleAcademie.contentAcademie,imageAcademie:files.files}}),data=_axios$post.data;console.log(data);}catch(error){console.log(error);}case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleChange=function handleChange(_ref2){var currentTarget=_ref2.currentTarget;var name=currentTarget.name,value=currentTarget.value;setArticleAcademie(_objectSpread(_objectSpread({},articleAcademie),{},_defineProperty({},name,value)));setFile(_objectSpread(_objectSpread({},files),{},_defineProperty({},name,value)));};useEffect(function(){GetArticlesClosingAcademie();},[]);function GetArticlesClosingAcademie(){var axiosRequest1=axios.get('https://sesameoeuvretoiadmin.herokuapp.com/api/articles-academies');var axiosRequest2=axios.get('https://sesameoeuvretoiadmin.herokuapp.com/api/temoignages');axios.all([axiosRequest1,axiosRequest2]).then(axios.spread(function(data1,data2){setArticles(data1.data.data);setTemoignages(data2.data.data);setIsLoading(false);console.log(data1.data.data[0]);console.log(data1.data.data[0].attributes.imageAcademie.data[0].attributes.url);// console.log(data2.data.data[0].attributes.contentTemoignage);\n})).catch(function(error){console.log(error);});}var displaySelectClosing=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var select;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:select=document.querySelector(\".select-navbar\");if(select.style.display===\"inline-block\"){select.style.display=\"none\";}else{select.style.display=\"inline-block\";}case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function displaySelectClosing(){return _ref3.apply(this,arguments);};}();var displayListNavBarMedia=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var navBarMedia;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:navBarMedia=document.querySelector(\".list-navbar-media\");if(navBarMedia.style.display===\"block\"){navBarMedia.style.display=\"none\";}else{navBarMedia.style.display=\"block\";}case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function displayListNavBarMedia(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-sesame\",children:/*#__PURE__*/_jsx(Link,{to:\"/home\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"S\\xE9same \\u0153uvre-toi\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"icon-navbar\",onClick:displayListNavBarMedia,children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-bars\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"list-navbar-media\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/apropos\",children:/*#__PURE__*/_jsx(\"li\",{className:\"list-navbar-media-1\",children:\"\\xC0 propos\"})}),/*#__PURE__*/_jsx(Link,{to:\"/academie\",children:/*#__PURE__*/_jsx(\"li\",{className:\"list-navbar-media-2\",children:\"J'ouvre les portes de l'acad\\xE9mie\"})}),/*#__PURE__*/_jsx(Link,{to:\"/jedecouvre\",children:/*#__PURE__*/_jsx(\"li\",{className:\"list-navbar-media-3\",children:\"Je d\\xE9couvre\"})}),/*#__PURE__*/_jsx(Link,{to:\"/chronique\",children:/*#__PURE__*/_jsx(\"li\",{className:\"list-navbar-media-4\",children:\"Chronique lifestyle\"})}),/*#__PURE__*/_jsx(Link,{to:\"/oeuvretoi\",children:/*#__PURE__*/_jsx(\"li\",{className:\"list-navbar-media-5\",children:\"Oeuvre-toi\"})}),/*#__PURE__*/_jsx(Link,{to:\"/contact\",children:/*#__PURE__*/_jsx(\"li\",{className:\"list-navbar-media-6\",children:\"Contact\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-desktop\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-sesame\",children:/*#__PURE__*/_jsx(Link,{to:\"/home\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"S\\xE9same \\u0153uvre-toi\"})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/apropos\",children:/*#__PURE__*/_jsx(\"li\",{children:\"\\xC0 propos\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"li\",{id:\"closing-list-nav\",onClick:displaySelectClosing,children:\"Closing \\u25BF\"}),/*#__PURE__*/_jsx(\"div\",{className:\"select-navbar\",children:/*#__PURE__*/_jsxs(\"ul\",{name:\"closings\",id:\"closings\",children:[/*#__PURE__*/_jsx(Link,{to:\"/academie\",children:/*#__PURE__*/_jsx(\"li\",{children:\"J'ouvre les portes de l'acad\\xE9mie\"})}),/*#__PURE__*/_jsx(Link,{to:\"/jedecouvre\",children:/*#__PURE__*/_jsx(\"li\",{children:\"Je d\\xE9couvre\"})})]})})]}),/*#__PURE__*/_jsx(Link,{to:\"/chronique\",children:/*#__PURE__*/_jsx(\"li\",{children:\"Chronique lifestyle\"})}),/*#__PURE__*/_jsx(Link,{to:\"/oeuvretoi\",children:/*#__PURE__*/_jsx(\"li\",{children:\"Oeuvre-toi\"})}),/*#__PURE__*/_jsx(Link,{to:\"/contact\",children:/*#__PURE__*/_jsx(\"li\",{children:\"Contact\"})})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-closing\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"first-part-closing\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"img-title-closing\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"J\\u2019ouvre les portes de l\\u2019acad\\xE9mie\"}),/*#__PURE__*/_jsx(\"img\",{src:imageClosing,alt:\"image d'arbrisseau\",id:\"image-academie\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"list-closing-academie\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cadre-white\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[isLoading?'Loading...':articles.map(function(article){return/*#__PURE__*/_jsx(\"a\",{href:\"#\".concat(article.attributes.titleAcademie),children:/*#__PURE__*/_jsx(\"li\",{children:article.attributes.titleAcademie},article.id)});}),/*#__PURE__*/_jsx(\"a\",{href:\"#temoignages\",children:/*#__PURE__*/_jsx(\"li\",{children:\"T\\xE9moignages\"})})]})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"articles-closing\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"image\",name:\"imageAcademie\",onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{children:\"Titre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"titleAcademie\",onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{children:\"Contenu\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",id:\"content\",name:\"contentAcademie\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Envoyer\",class:\"submit-form\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:isLoading?'Loading...':articles.map(function(article){return/*#__PURE__*/_jsx(Link,{to:\"/academie/\".concat(article.id),children:/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"h3\",{id:article.attributes.titleAcademie,children:article.attributes.titleAcademie}),/*#__PURE__*/_jsx(ReactMarkdown,{className:\"markdown-academie\",children:article.attributes.contentAcademie})]},article.id)});})})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"temoignages\",id:\"temoignages\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"T\\xE9moignages\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"display-flex-temoignage\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:imageTemoignage,className:\"img-temoignage\",alt:\"image temoignage chemin\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"display-temoignages\",children:[/*#__PURE__*/_jsx(\"img\",{src:quotesClosing,id:\"img-quotes\",alt:\"image guillemets\"}),isLoading?'Loading...':/*#__PURE__*/_jsx(Carousel,{className:\"carousel-temoignages\",children:temoignages.map(function(temoignage){return/*#__PURE__*/_jsx(Link,{to:\"/temoignage/\".concat(temoignage.id),children:/*#__PURE__*/_jsx(\"p\",{children:temoignage.attributes.contentTemoignage},temoignage.id)});})})]})]})]})]})]});}export default ClosingAcademie;","map":{"version":3,"sources":["/Users/aline/Desktop/Projects/sesame_project/src/components/closingacademie.jsx"],"names":["React","useEffect","useState","ReactMarkdown","Link","axios","imageClosing","quotesClosing","imageTemoignage","Carousel","ClosingAcademie","isLoading","setIsLoading","articles","setArticles","temoignages","setTemoignages","files","setFile","articleAcademie","setArticleAcademie","handleSubmit","event","preventDefault","formData","FormData","append","post","headers","console","log","data","titleAcademie","contentAcademie","imageAcademie","error","handleChange","currentTarget","name","value","GetArticlesClosingAcademie","axiosRequest1","get","axiosRequest2","all","then","spread","data1","data2","attributes","url","catch","displaySelectClosing","select","document","querySelector","style","display","displayListNavBarMedia","navBarMedia","map","article","id","temoignage","contentTemoignage"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { Link } from \"react-router-dom\";\nimport axios from 'axios';\nimport imageClosing from '../images/nagy-arnold-X_IvVDuHvDQ-unsplash.jpg';\nimport quotesClosing from '../images/‚Äù.png';\nimport imageTemoignage from '../images/karina-vargas-J7hCnavj7QE-unsplash.jpg';\nimport Carousel from 'react-elastic-carousel';\n\n\nfunction ClosingAcademie() {\n    const [isLoading, setIsLoading] = useState(true);\n    const [articles, setArticles] = useState(null);\n    const [temoignages, setTemoignages] = useState(null);\n    const [files,setFile] = useState(false);\n\n    const [articleAcademie, setArticleAcademie] = useState({});\n\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n\n        try {\n            const formData = new FormData()\n            formData.append('files', files);\n\n            await axios.post('https://sesameoeuvretoiadmin.herokuapp.com/api/upload', formData, {\n                headers: { 'Content-Type': 'multipart/form-data' },\n              });\n        } catch(error) {\n            console.log(error);\n        }\n\n        try {\n            const {data} = axios.post('https://sesameoeuvretoiadmin.herokuapp.com/api/articles-academies', {\n                data: {\n                    titleAcademie: articleAcademie.titleAcademie,\n                    contentAcademie: articleAcademie.contentAcademie,\n                    imageAcademie: files.files                \n                }\n                })\n                console.log(data);\n        } catch(error) {\n            console.log(error);\n        }\n    }\n    \n    const handleChange = ({ currentTarget }) => {\n        const {name, value} = currentTarget;\n        setArticleAcademie({\n            ...articleAcademie,\n            [name]: value,\n        })\n        setFile({\n            ...files,\n            [name]: value\n        })\n    } \n    \n    useEffect(() => {\n        GetArticlesClosingAcademie();\n    },[])\n\n    function GetArticlesClosingAcademie() {\n        const axiosRequest1 = axios.get('https://sesameoeuvretoiadmin.herokuapp.com/api/articles-academies');\n        const axiosRequest2 = axios.get('https://sesameoeuvretoiadmin.herokuapp.com/api/temoignages');\n        axios.all([axiosRequest1, axiosRequest2])\n        .then(axios.spread(function(data1, data2) {\n            setArticles(data1.data.data);\n            setTemoignages(data2.data.data);\n            setIsLoading(false);\n            console.log(data1.data.data[0]);\n            console.log(data1.data.data[0].attributes.imageAcademie.data[0].attributes.url);\n            // console.log(data2.data.data[0].attributes.contentTemoignage);\n        }))\n        .catch(error => {\n            console.log(error)\n        })\n    }\n\n    const displaySelectClosing = async () => {\n        let select = document.querySelector(\".select-navbar\");\n\n        if(select.style.display === \"inline-block\") {\n            select.style.display = \"none\";\n        } else {\n            select.style.display = \"inline-block\";\n        }\n    }\n\n    const displayListNavBarMedia = async () => {\n        let navBarMedia = document.querySelector(\".list-navbar-media\");\n        \n        if(navBarMedia.style.display === \"block\") {\n            navBarMedia.style.display = \"none\";\n        } else {\n            navBarMedia.style.display = \"block\";\n        }\n    }\n       \n    return (\n        <div>\n            <nav>\n                <div className=\"navbar\">\n                    <div className=\"logo-sesame\">\n                        <Link to=\"/home\"><h1>S√©same ≈ìuvre-toi</h1></Link>\n                    </div>\n                    <div className=\"icon-navbar\" onClick={displayListNavBarMedia}>\n                        <i class=\"fas fa-bars\"></i>\n                    </div>\n                </div>\n                <div className=\"list-navbar-media\">\n                    <ul>\n                        <Link to=\"/apropos\"><li className=\"list-navbar-media-1\">√Ä propos</li></Link>\n                        <Link to=\"/academie\"><li className=\"list-navbar-media-2\">J'ouvre les portes de l'acad√©mie</li></Link>\n                        <Link to=\"/jedecouvre\"><li className=\"list-navbar-media-3\">Je d√©couvre</li></Link>\n                        <Link to=\"/chronique\"><li className=\"list-navbar-media-4\">Chronique lifestyle</li></Link>\n                        <Link to=\"/oeuvretoi\"><li className=\"list-navbar-media-5\">Oeuvre-toi</li></Link>\n                        <Link to=\"/contact\"><li className=\"list-navbar-media-6\">Contact</li></Link>\n                    </ul>              \n                </div>\n                <div className=\"navbar-desktop\">\n                    <div className=\"logo-sesame\">\n                        <Link to=\"/home\"><h1>S√©same ≈ìuvre-toi</h1></Link>\n                    </div>\n                    <div>\n                        <ul>\n                            <Link to=\"/apropos\"><li>√Ä propos</li></Link>\n                            <div>\n                                <li id=\"closing-list-nav\" onClick={displaySelectClosing}>Closing ‚ñø</li>\n                                <div className=\"select-navbar\">\n                                    <ul name=\"closings\" id=\"closings\">\n                                        <Link to=\"/academie\"><li>J'ouvre les portes de l'acad√©mie</li></Link>\n                                        <Link to=\"/jedecouvre\"><li>Je d√©couvre</li></Link>\n                                    </ul>\n                                </div>\n                            </div>\n                            <Link to=\"/chronique\"><li>Chronique lifestyle</li></Link>\n                            <Link to=\"/oeuvretoi\"><li>Oeuvre-toi</li></Link>\n                            <Link to=\"/contact\"><li>Contact</li></Link>\n                        </ul>                    \n                    </div>                    \n                </div>\n            </nav>\n\n            <div className=\"page-closing\">\n                <section className=\"first-part-closing\">\n                    <div className=\"img-title-closing\">\n                        <h2>J‚Äôouvre les portes de l‚Äôacad√©mie</h2>\n                        <img src={imageClosing} alt=\"image d'arbrisseau\" id=\"image-academie\" />\n                    </div>\n                    <div className=\"list-closing-academie\">\n                        <div className=\"cadre-white\"></div>\n                        <ul>\n                        {\n                            isLoading ? 'Loading...' : articles.map(article => <a href={`#${article.attributes.titleAcademie}`}><li key={article.id}>{article.attributes.titleAcademie}</li></a>)\n                        }\n                            <a href=\"#temoignages\"><li>T√©moignages</li></a>\n                        </ul>\n                    </div>\n                </section>\n\n                <section className=\"articles-closing\">\n                <form onSubmit={handleSubmit}>\n                    <label>Image</label>\n                    <input type=\"file\" id=\"image\" name=\"imageAcademie\" onChange={handleChange} />\n                    <label>Titre</label>\n                    <input type=\"text\" id=\"title\" name=\"titleAcademie\" onChange={handleChange} />\n                    <label>Contenu</label>\n                    <textarea type=\"text\" id=\"content\" name=\"contentAcademie\" onChange={handleChange} />\n                    <input type=\"submit\" value=\"Envoyer\" class=\"submit-form\" />\n                </form>\n                    <ul>\n                        {\n                            isLoading ? 'Loading...' : articles.map((article) => <Link to={`/academie/${article.id}`}><li key={article.id}><h3 id={article.attributes.titleAcademie}>{article.attributes.titleAcademie}</h3><ReactMarkdown className=\"markdown-academie\">{article.attributes.contentAcademie}</ReactMarkdown></li></Link>)\n                        }                                 \n                    </ul>\n                </section>\n\n                <section className=\"temoignages\" id=\"temoignages\">\n                    <h3>T√©moignages</h3>\n                    <div className=\"display-flex-temoignage\">\n                        <div>\n                            <img src={imageTemoignage} className=\"img-temoignage\" alt=\"image temoignage chemin\" />\n                        </div>\n                        <div className=\"display-temoignages\">\n                            <img src={quotesClosing} id=\"img-quotes\" alt=\"image guillemets\" />\n                            {\n                                isLoading ? 'Loading...' : <Carousel className=\"carousel-temoignages\">{temoignages.map(temoignage => <Link to={`/temoignage/${temoignage.id}`}><p key={temoignage.id}>{temoignage.attributes.contentTemoignage}</p></Link>)}</Carousel>\n                            }                                \n                        </div>\n                    </div>\n                </section>             \n            </div>        \n        </div>\n    )\n}\n\nexport default ClosingAcademie;\n"]},"metadata":{},"sourceType":"module"}